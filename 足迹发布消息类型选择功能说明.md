# 足迹发布消息类型选择功能说明

## 功能概述

在足迹发布页面添加了消息类型选择功能，用户可以选择发布的足迹是"公开"还是"个人可见"。

## 实现内容

### 1. UI界面修改

#### 布局文件更新 (`activity_add_footprint.xml`)
- 在位置信息下方添加了消息类型选择区域
- 包含一个标题"消息类型"和一个水平排列的RadioGroup
- 两个RadioButton选项：
  - "公开" (默认选中)
  - "个人可见"

```xml
<!-- 消息类型选择 -->
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="16dp"
    android:orientation="vertical"
    android:padding="8dp">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="消息类型"
        android:textColor="#333333"
        android:textSize="14sp"
        android:textStyle="bold"/>

    <RadioGroup
        android:id="@+id/rg_msg_type"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dp"
        android:orientation="horizontal">

        <RadioButton
            android:id="@+id/rb_public"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:checked="true"
            android:text="公开"
            android:textColor="#333333"
            android:textSize="14sp"/>

        <RadioButton
            android:id="@+id/rb_private"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="个人可见"
            android:textColor="#333333"
            android:textSize="14sp"/>

    </RadioGroup>

</LinearLayout>
```

### 2. Java代码修改

#### AddFootprintActivity.java 更新

**导入语句添加：**
```java
import android.widget.RadioGroup;
import android.widget.RadioButton;
```

**成员变量添加：**
```java
private RadioGroup rgMsgType;
private RadioButton rbPublic;
private RadioButton rbPrivate;
private int msgType = 1; // 默认为公开类型
```

**初始化方法更新：**
```java
private void initViews() {
    // ... 其他初始化代码 ...
    rgMsgType = findViewById(R.id.rg_msg_type);
    rbPublic = findViewById(R.id.rb_public);
    rbPrivate = findViewById(R.id.rb_private);
    // ...
}
```

**事件监听器添加：**
```java
private void setupClickListeners() {
    // ... 其他监听器 ...
    
    // 消息类型选择
    rgMsgType.setOnCheckedChangeListener((group, checkedId) -> {
        if (checkedId == R.id.rb_public) {
            msgType = 1; // 公开
        } else if (checkedId == R.id.rb_private) {
            msgType = 2; // 个人可见
        }
    });
    
    // ...
}
```

**发布方法更新：**
```java
private void publishFootprint(String content, String location) {
    // ... 其他代码 ...
    
    // 创建发布参数对象
    PublishTrandsInfoPO publishInfo = new PublishTrandsInfoPO();
    // ... 设置其他参数 ...
    publishInfo.setMsgType(msgType); // 消息类型 (1: 公开, 2: 个人可见)
    
    // ...
}
```

### 3. 数据模型更新

#### PublishTrandsInfoPO.java 更新

**字段添加：**
```java
/**
 * 消息类型 (1: 公开, 2: 个人可见)
 */
private Integer msgType;
```

**构造函数更新：**
```java
public PublishTrandsInfoPO(String userId, String locationInfo, String type, 
                          String content, String tag, List<String> imagePaths, 
                          Double lng, Double lat, Integer msgType) {
    // ... 设置其他字段 ...
    this.msgType = msgType;
}
```

**Getter和Setter方法：**
```java
public Integer getMsgType() {
    return msgType;
}

public void setMsgType(Integer msgType) {
    this.msgType = msgType;
}
```

**toString方法更新：**
```java
@Override
public String toString() {
    return "PublishTrandsInfoPO{" +
            // ... 其他字段 ...
            ", msgType=" + msgType +
            '}';
}
```

## 功能特性

1. **默认选择**：默认选中"公开"选项
2. **实时更新**：用户选择不同选项时，msgType变量会实时更新
3. **数据传递**：选择的消息类型会包含在发布请求中发送到服务器
4. **类型定义**：
   - 1 = 公开
   - 2 = 个人可见

## 使用流程

1. 用户进入足迹发布页面
2. 填写足迹内容、选择图片、设置位置
3. 选择消息类型（公开/个人可见）
4. 点击发布按钮
5. 系统将包含消息类型的完整信息发送到服务器

## 注意事项

1. 消息类型选择是必需的，默认为公开
2. 该功能已集成到现有的足迹发布流程中
3. 服务器端需要支持msgType参数的处理
4. 项目编译成功，功能可以正常使用

## 相关文件

- `app/src/main/res/layout/activity_add_footprint.xml` - 布局文件
- `app/src/main/java/com/damors/zuji/AddFootprintActivity.java` - 主要活动类
- `app/src/main/java/com/damors/zuji/model/PublishTrandsInfoPO.java` - 数据模型类