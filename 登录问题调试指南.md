# 登录问题调试指南

## 问题描述
当出现"登录失败: 请求失败，请稍后重试"错误时，可以按照以下步骤进行调试。

## 调试步骤

### 1. 查看详细日志
使用以下命令查看应用日志：
```bash
adb logcat -s ApiService:* GsonRequest:*
```

### 2. 常见错误原因及解决方案

#### 2.1 服务器返回错误码不是200
**现象**: 日志中显示"业务失败 [code: xxx, msg: xxx]"
**解决方案**: 
- 检查服务器返回的具体错误码和错误信息
- 根据错误信息调整请求参数或联系后端开发人员

#### 2.2 网络连接问题
**现象**: 日志中显示"网络错误"或"连接超时"
**解决方案**:
- 检查设备网络连接
- 确认服务器地址是否正确
- 检查防火墙设置

#### 2.3 请求参数错误
**现象**: 服务器返回400错误码
**解决方案**:
- 检查手机号格式是否正确
- 检查验证码是否有效
- 检查设备ID是否正确生成

#### 2.4 Content-Type不匹配
**现象**: 日志中显示"Content type not supported"
**解决方案**:
- 确认请求头中的Content-Type设置正确
- 当前已设置为"application/json"

### 3. 调试日志说明

#### 3.1 请求日志
```
发起登录请求: phone=xxx, code=xxx, deviceId=xxx
登录请求URL: xxx
```

#### 3.2 成功响应日志
```
登录成功: [响应数据]
```

#### 3.3 失败响应日志
```
登录失败: [错误信息]
错误类型: [错误类型]
业务失败 [code: xxx, msg: xxx]
服务器响应原始数据: [原始JSON数据]
```

### 4. 排查流程

1. **检查网络连接**
   - 确保设备已连接到网络
   - 尝试访问其他网络服务

2. **检查请求参数**
   - 确认手机号格式正确
   - 确认验证码未过期
   - 确认设备ID生成正确

3. **查看服务器响应**
   - 检查日志中的"服务器响应原始数据"
   - 分析返回的错误码和错误信息

4. **检查服务器状态**
   - 确认服务器是否正常运行
   - 检查API接口是否可用

### 5. 常见错误码说明

- **200**: 请求成功
- **400**: 请求参数错误
- **401**: 未授权访问
- **403**: 禁止访问
- **404**: 接口不存在
- **500**: 服务器内部错误

### 6. 联系技术支持

如果按照上述步骤仍无法解决问题，请提供以下信息联系技术支持：

1. 完整的错误日志
2. 设备信息（型号、系统版本）
3. 网络环境信息
4. 复现步骤

## 代码修改说明

本次修改主要增强了日志记录功能：

1. **GsonRequest.java**: 增加了详细的错误信息记录，包括错误码和服务器原始响应
2. **ApiService.java**: 增加了登录请求的详细参数记录和错误类型记录

这些修改有助于快速定位和解决登录问题。